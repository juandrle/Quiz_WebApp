<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WBA</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
</head>

<body>
    <div class="container">
        <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
            <div class="navbar-nav">
                <a th:href="@{?sprache=de}" class="nav-item nav-link">DE</a>
                <a th:href="@{?sprache=en}" class="nav-item nav-link">EN</a>
                <a th:href="@{?sprache=nl}" class="nav-item nav-link">NL</a>
            </div>
        </nav>

        <form th:action="@{#}" th:method="POST" th:object="${frageformular}">
            <h1 th:text="#{frageformular.titel.bearbeiten(${fragenr})}" />
            <div class="left-div">
                <table class="table table-hover">
                    <tr class="d-flex">
                        <td class="col-2">
                            <label for="kategorie" class="col-sm-1 col-form-label"
                                th:text="#{frageformular.label.kategorie}" />
                        </td>
                        <td class="col-8">
                            <select class="form-select" name="kategorie" th:field="*{kategorie}"
                                th:errorclass="is-invalid">
                                <option value="" disabled selected th:text="#{frageformular.kategorie}" />
                                <option th:each="kat : *{kategorien}" th:value="${kat}" th:text="${kat}" />
                            </select>
                            <p th:if="${#fields.hasErrors('kategorie')}" th:errors="*{kategorie}"
                                class="invalid-feedback" />
                        </td>
                    </tr>
                    <tr class="d-flex">
                        <td class="col-2">
                            <label for="frage" class="col-sm-1 col-form-label" th:text="#{frageformular.label.frage}" />
                        </td>
                        <td class="col-8">
                            <input name="frage" th:field="*{frage}" type="text" class="form-control"
                                th:errorclass="is-invalid" th:placeholder="#{frageformular.fragetext}">
                            <p th:if="${#fields.hasErrors('frage')}" th:errors="*{frage}" class="invalid-feedback" />
                        </td>
                    </tr>
                    <tr class="d-flex">
                        <td class="col-2">
                            <label for=richtigeAntwort class="col-sm-1 col-form-label"
                                th:text="#{frageformular.label.richtigeAntwort}" />
                        </td>
                        <td class="col-8">
                            <input name="richtigeantwort" th:field="*{richtigeAntwort}" type="text" class="form-control"
                                th:errorclass="is-invalid">
                            <p th:if="${#fields.hasErrors('richtigeAntwort')}" th:errors="*{richtigeAntwort}"
                                class="invalid-feedback" />
                        </td>
                    </tr>
                    <tr class="d-flex">
                        <td class="col-2">
                            <label for="punkte" class="col-sm-1 col-form-label"
                                th:text="#{frageformular.label.punkte}" />
                        </td>
                        <td class="col-8">
                            <input name="punkte" th:field="*{punkte}" type="number" class="form-control"
                                th:errorclass="is-invalid">
                            <p th:if="${#fields.hasErrors('punkte')}" th:errors="*{punkte}" class="invalid-feedback" />
                        </td>
                    </tr>
                </table>
            </div>
            <div class="right-div">
                <h2 th:text="#{frageformular.titel.falschantworten(${MAXFALSCH})}" />
                <table class="table table-hover">
                    <!--issue with Bootstrap invalid-feedback class, forcing class to show with d-block worked-->
                    <p th:if="${#fields.hasErrors('falschantworten')}" th:errors="*{falschantworten}"
                        class="invalid-feedback d-block" />

                    <div th:if="not ${#lists.isEmpty(frageformular.falschantworten)}">
                        <tr class="d-flex" th:each="antwort, status: *{falschantworten}">
                            <td class="col-2">
                                <label th:text="${status.count}" class="col-sm-1 col-form-label" />
                            </td>
                            <td class="col-8">
                                <input type="text" th:field="*{falschantworten[__${status.index}__]}"
                                    class="form-control">
                            </td>
                        </tr>
                    </div>

                    <tr class="d-flex" th:if="${#lists.size(frageformular.falschantworten) lt MAXFALSCH}">
                        <td class="col-2">
                            <label for="neueFalschantwort" class="col-sm-1 col-form-label"
                                th:text="#{frageformular.label.neueFalschantwort}" />
                        </td>
                        <td class="col-8">
                            <input name="neueFalschantwort" th:field="*{neueFalschantwort}" type="text"
                                class="form-control" th:errorclass="is-invalid">
                            <p th:if="${#fields.hasErrors('neueFalschantwort')}" th:errors="*{neueFalschantwort}"
                                class="invalid-feedback" />
                        </td>
                    </tr>
                </table>
            </div>
            <div class="subm-btn">
                <input type="submit" th:value="#{frageformular.label.submit}" class="btn btn-primary">
            </div>
        </form>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
            crossorigin="anonymous"></script>
</body>

</html>